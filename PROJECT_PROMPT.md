
# موجه أوامر (Prompt) لشرح مشروع SNAD الاستثماري

## 1. نظرة عامة على المشروع

أنت مكلف بفهم وتحليل مشروع **SNAD**، وهو تطبيق ويب متكامل وتطبيق جوال (PWA مغلف بـ Capacitor) يعمل كمنصة استثمارية عالية العائد (HYIP). المشروع مبني باستخدام Next.js للواجهة الأمامية، و Firebase (Realtime Database و Authentication) للجهة الخلفية، مع واجهة مستخدم مبنية باستخدام ShadCN و TailwindCSS.

**الهدف الأساسي للمشروع:** تمكين المستخدمين من التسجيل، إيداع الأموال، الاستثمار في خطط محددة، جمع الأرباح اليومية، سحب الأموال، وكسب عمولات من خلال نظام إحالة متطور.

**أدوار المستخدمين:**
1.  **المستخدم العادي (User):** يمكنه إدارة استثماراته وأمواله.
2.  **المدير (Admin):** يمتلك صلاحيات كاملة لإدارة المنصة (مستخدمين، خطط، معاملات، إعدادات).

---

## 2. تفصيل الصفحات والوظائف

### أ. الصفحات العامة (للزوار)

-   **الصفحة الرئيسية (`/`):**
    -   **عرض:** تحتوي على قسم ترحيبي جذاب (Hero Section)، قائمة بخطط الاستثمار المتاحة، وروابط لتسجيل الدخول وإنشاء حساب.
    -   **وظيفة:** تعرض خطط الاستثمار مباشرة من قاعدة البيانات.

-   **صفحة تسجيل الدخول (`/login`):**
    -   **عرض:** نموذج لإدخال البريد الإلكتروني وكلمة المرور.
    -   **وظيفة:** تتحقق من بيانات المستخدم عبر Firebase Authentication وتقوم بتسجيل دخوله وتوجيهه إلى لوحة التحكم.

-   **صفحة إنشاء حساب (`/signup`):**
    -   **عرض:** نموذج لإنشاء حساب جديد يتطلب: الاسم الكامل، البريد الإلكتروني، كلمة المرور، وتأكيدها، بالإضافة إلى حقل اختياري لـ "كود الدعوة".
    -   **وظيفة:**
        -   تتحقق من صحة المدخلات (مثل تطابق كلمات المرور).
        -   تنشئ مستخدمًا جديدًا في Firebase Authentication.
        -   تنشئ ملفًا شخصيًا للمستخدم في Realtime Database تحت `users/{userId}` مع بياناته الأساسية ورصيد مبدئي (0).
        -   إذا تم إدخال كود دعوة صحيح، يتم ربط المستخدم الجديد بصاحب الكود (المُحيل).

### ب. صفحات المستخدم المسجل (لوحة التحكم - `/dashboard`)

-   **لوحة التحكم الرئيسية (`/dashboard`):**
    -   **عرض:** هي المحور الرئيسي للمستخدم. تعرض:
        -   **إجراءات سريعة:** أزرار (إيداع، سحب، دعوة، استثمار).
        -   **بطاقة الرصيد:** تعرض إجمالي الرصيد المتاح للمستخدم بشكل بارز.
        -   **إحصائيات:** بطاقات تعرض "إجمالي الربح" و "إجمالي المستثمر".
        -   **بطاقة الإحالات:** تعرض ملخص أرباح الإحالات مع زر للانتقال لصفحة التفاصيل.
        -   **أحدث المعاملات:** قائمة بآخر 5 معاملات للمستخدم (إيداع، سحب، ربح، ...).
        -   **شريط الأنشطة (Social Proof):** شريط متحرك يعرض أنشطة وهمية (مثل "علي قام بإيداع 150$") لزيادة الثقة.
    -   **وظيفة:** تجلب جميع بيانات المستخدم (الملف الشخصي، المعاملات، الاستثمارات) من قاعدة البيانات لعرضها.

-   **صفحة استثماراتي (`/dashboard/investments`):**
    -   **عرض:** تعرض تفاصيل الاستثمار "النشط" للمستخدم إن وجد. تتضمن اسم الخطة، المبلغ، تاريخ البدء والانتهاء، الربح اليومي، والربح الإجمالي حتى الآن.
    -   **وظيفة:**
        -   **إلغاء الاستثمار:** زر لإلغاء الاستثمار (بعد مرور 24 ساعة من بدايته)، مما يعيد المبلغ الأصلي إلى رصيد المستخدم.
        -   **إكمال تلقائي:** عند انتهاء مدة الاستثمار، يتم تلقائيًا تحديث حالة الاستثمار إلى "مكتمل" وإعادة المبلغ الأصلي إلى رصيد المستخدم.

-   **صفحة الأسواق (`/dashboard/markets`):**
    -   **عرض:** تعرض أسعار العملات الرقمية الرئيسية (مثل بيتكوين، إيثيريوم) مع نسبة التغير خلال 24 ساعة.
    -   **وظيفة:** تجلب البيانات بشكل مباشر من واجهة برمجة تطبيقات خارجية (CoinGecko API) وتحدثها تلقائيًا كل 60 ثانية.

-   **صفحة الربح اليومي (`/dashboard/trade`):**
    -   **عرض:** هذه الصفحة هي مركز التفاعل اليومي للمستخدم. تحتوي على:
        -   **بطاقة جمع الربح:** زر "اجمع أرباح اليوم". عند الضغط عليه، تظهر رسائل محاكاة لعملية تداول (مثل "تحليل السوق..."، "تنفيذ صفقة...") لمدة 20 ثانية.
        -   **نظام المهام (Bounty System):** يعرض مهام متاحة (مثل "انشر على فيسبوك") مع مكافأة محددة. يمكن للمستخدم تقديم رابط كإثبات.
    -   **وظيفة:**
        -   **جمع الربح:** عند اكتمال المحاكاة، يتم إضافة الربح اليومي (المحسوب من الاستثمار النشط) إلى رصيد المستخدم، ويتم تسجيل آخر وقت للمطالبة. لا يمكن المطالبة مرة أخرى إلا بعد 24 ساعة.
        -   **تقديم المهام:** يتم إرسال رابط الإثبات إلى المدير للمراجعة.

-   **صفحة المعاملات (`/dashboard/transactions`):**
    -   **عرض:** جدول يعرض "جميع" معاملات المستخدم (إيداع، سحب، ربح، استثمار، مكافأة إحالة) مع حالتها (مكتمل، قيد الانتظار، فاشل) والتاريخ والمبلغ.
    -   **وظيفة:** توفر زر "تصدير CSV" لتنزيل سجل المعاملات كملف.

-   **صفحة الإحالات (`/dashboard/referrals`):**
    -   **عرض:**
        -   **برنامج الشركاء:** يشرح الرتب التي يمكن للمستخدم الوصول إليها (شريك نجاح، ممثل) بناءً
            على إجمالي إيداعات فريقه، والعمولة المتزايدة لكل رتبة.
        -   **كود الدعوة:** يعرض كود الدعوة الفريد للمستخدم مع زر لنسخه.
        -   **سجل الإحالات:** جدول يعرض المستخدمين الذين انضموا عبر كوده، ومبلغ العمولة المكتسبة من كل واحد.
    -   **وظيفة:** زر "تحقق من الرتبة" يقوم بحساب إجمالي إيداعات الفريق وتحديث رتبة المستخدم وعمولته تلقائيًا إذا وصل إلى الهدف.

-   **صفحة المحفظة (`/dashboard/wallet`):**
    -   **عرض:** تحتوي على قسمين (إيداع وسحب):
        -   **قسم الإيداع:** يعرض عنوان محفظة USDT (TRC20) الخاص بالمنصة مع زر للنسخ، ونموذج لإدخال "المبلغ المودع" و "معرف المعاملة (TxID)".
        -   **قسم السحب:** نموذج لإدخال "مبلغ السحب"، "عنوان محفظة المستلم"، و "كلمة المرور" للتأكيد.
    -   **وظيفة:**
        -   **الإيداع:** يرسل طلب إيداع إلى المدير للمراجعة اليدوية.
        -   **السحب:** يتم تعطيل السحب ما لم تتحقق شروط معينة (مثل وجود إيداع مكتمل واحد على الأقل، وعدد معين من مطالبات الربح اليومي). عند تقديم الطلب، يتم التحقق من كلمة المرور وخصم المبلغ من الرصيد وإرسال طلب للمدير للمراجعة.

-   **صفحة الإعدادات (`/dashboard/settings`):**
    -   **عرض:** نماذج لتحديث "الاسم الكامل" و "كلمة المرور".
    -   **وظيفة:** تسمح للمستخدم بتغيير اسمه أو كلمة مروره بعد التحقق من كلمة المرور الحالية.

### ج. صفحات المدير (Admin - `/dashboard/admin`)

-   **لوحة تحكم المدير (`/dashboard/admin`):**
    -   **عرض:** واجهة شاملة تحتوي على بطاقات لإدارة كل جوانب المنصة:
        -   **إحصائيات مالية:** صافي الربح والتدفق المالي اليومي.
        -   **سجل الإيداعات:** قائمة بطلبات الإيداع المعلقة مع أزرار "موافقة" أو "رفض".
        -   **سجل السحوبات:** قائمة بطلبات السحب المعلقة مع أزرار "موافقة" أو "رفض".
        -   **مراجعة المهام:** مراجعة إثباتات المهام المرسلة من المستخدمين والموافقة عليها.
        -   **إدارة الخطط:** إنشاء وتعديل وحذف خطط الاستثمار.
        -   **إدارة برنامج الشركاء:** تعديل أهداف وعمولات الرتب.
        -   **إدارة الإعلانات:** نشر أو تحديث الإعلان الذي يظهر لجميع المستخدمين.
        -   **الإعدادات العامة:** تغيير رابط دعم تيليجرام وعنوان محفظة الإيداع.
        -   **إدارة المهام (Bounties):** إنشاء وتعديل المهام ومكافآتها.
    -   **وظيفة:** كل بطاقة تتفاعل مباشرة مع قاعدة البيانات لتنفيذ الإجراءات المطلوبة (مثل تحديث حالة معاملة، إضافة رصيد لمستخدم، تغيير إعدادات).

-   **صفحة إدارة المستخدمين (`/dashboard/admin/users`):**
    -   **عرض:** جدول بجميع مستخدمي المنصة مع بياناتهم (الاسم، البريد الإلكتروني، الرصيد).
    -   **وظيفة:**
        -   **تعديل مباشر:** تعديل رصيد أي مستخدم.
        -   **إعادة تعيين كلمة المرور:** إرسال بريد إلكتروني لإعادة التعيين.
        -   **تفعيل الربح:** إعادة تعيين عداد الـ 24 ساعة للربح اليومي لمستخدم معين.
        -   **إلغاء الاستثمار:** إلغاء الاستثمار النشط لأي مستخدم.
